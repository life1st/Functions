{"version":3,"sources":["script\\canvas.js","script\\utils.js","script\\huaji.js","script\\main.js"],"names":["Canvas","el","canvas","height","width","ctx","getContext","prototype","setSize","clear","clearRect","drawRect","color","left","top","fillStyle","fillRect","drwaImg","img","drawImage","randomNum","min","max","range","Math","floor","random","getParams","params","window","location","search","arr","slice","split","obj","i","length","kv","Huaji","Image","src","huajiImg","position","size","step","zoom","speedH","speedW","setPosition","p","s","scale","animation","Object","assign","document","querySelector","body","clientWidth","clientHeight","huajiCount","COUNT","count","huajis","push","anima","realAnima","forEach","huaji","onload"],"mappings":"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","file":"main.d82baabb.map","sourceRoot":"..","sourcesContent":["export default function Canvas(el) {\r\n  this.canvas = el\r\n  this.height = 900\r\n  this.width = 1280\r\n  this.ctx = this.canvas.getContext('2d')\r\n}\r\n\r\nCanvas.prototype.setSize = function(width = 1280, height = 900) {\r\n  this.canvas.width = width\r\n  this.canvas.height = height\r\n  this.height = height\r\n  this.width = width\r\n}\r\n\r\nCanvas.prototype.clear = function() {\r\n  this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n}\r\n\r\nCanvas.prototype.drawRect = function(color, left, top, width, height) {\r\n  this.ctx.fillStyle = color\r\n  this.ctx.fillRect(top, left, width, height)\r\n}\r\n\r\nCanvas.prototype.drwaImg = function(img, left, top, width, height) {\r\n  this.ctx.drawImage(img, left, top, width, height)\r\n}\r\n\r\n","export function randomNum(min, max) {\r\n  let range = max - min + 1\r\n  return Math.floor(Math.random() * range + min)\r\n}\r\n\r\nexport function getParams() {\r\n  let params = window.location.search\r\n  params = params.slice(1)\r\n  let arr = params.split('&')\r\n  let obj = {}\r\n  for (let i = 0; i < arr.length; i++) {\r\n    let kv = arr[i].split('=')\r\n    obj[kv[0]] = kv[1]\r\n  }\r\n  return obj\r\n}\r\n","import huajiImg from '../imgs/huaji.png'\r\nimport { randomNum} from \"./utils\";\r\n\r\nexport default function Huaji() {\r\n  this.img = new Image()\r\n  this.img.src = huajiImg\r\n  this.position = {\r\n    top: 0,\r\n    left: 0\r\n  }\r\n  this.size = {\r\n    width: 50,\r\n    height: 50\r\n  }\r\n  this.step = 1\r\n  this.zoom = Math.random() > 0.6\r\n\r\n  // 设置初始速度 emmm...有改进空间\r\n  this.speedH = Math.random() > 0.6 ? 10 : -10\r\n  this.speedW = Math.random() > 0.6 ? -10 : 10\r\n}\r\n\r\nHuaji.prototype.setPosition = function(top, left) {\r\n  let p = this.position\r\n  p.top = top\r\n  p.left = left\r\n}\r\n\r\nHuaji.prototype.setSize = function(width, height) {\r\n  let s = this.size\r\n  s.width = width\r\n  s.height = height\r\n}\r\n\r\nHuaji.prototype.scale = function(min, max) {\r\n  if (this.size.width + this.step > max) {\r\n    this.step = -1\r\n  } else if (this.size.width + this.step < min) {\r\n    this.step = 1\r\n  }\r\n  this.setSize(this.size.width + this.step, this.size.height + this.step)\r\n}\r\n\r\nHuaji.prototype.animation = function(canvas) {\r\n  let p = Object.assign(this.position)\r\n  if (p.top < 0) {\r\n    this.speedH = 6 + randomNum(1, 4)\r\n  } else if (p.top > canvas.height) {\r\n    this.speedH = -6 + randomNum(-4, 1)\r\n  }\r\n  if (p.left < 0) {\r\n    this.speedW = 8 + randomNum(1, 4)\r\n  } else if (p.left > canvas.width) {\r\n    this.speedW = -8 + randomNum(-6, -1)\r\n  }\r\n  p.top += this.speedH\r\n  p.left += this.speedW\r\n  this.setPosition(p.top, p.left)\r\n  this.zoom\r\n    ? this.scale(50, 150)\r\n    : this.scale(40, 60)\r\n\r\n  canvas.drwaImg(this.img, this.position.left, this.position.top, this.size.width, this.size.height)\r\n\r\n}\r\n","import Canvas from './canvas'\r\nimport Huaji from './huaji'\r\n// import \"./utils\";\r\nimport { getParams, randomNum} from \"./utils\";\r\n\r\nlet el = document.querySelector('#huajiWrap')\r\nlet canvas = new Canvas(el)\r\ncanvas.setSize(document.body.clientWidth, document.body.clientHeight)\r\n\r\nlet params = getParams()\r\n\r\nlet huajiCount = 0\r\nconst COUNT = params.count || 400\r\n\r\nlet huajis = []\r\nfor (let i = 0; i < COUNT; i++) {\r\n  huajis.push(new Huaji())\r\n}\r\nhuajis.forEach(huaji => {\r\n  huaji.setPosition(randomNum(0, document.body.clientWidth)\r\n    , randomNum(0, document.body.clientHeight))\r\n  let size = randomNum(20, 200)\r\n  huaji.setSize(size, size)\r\n  huaji.img.onload = function() {\r\n    huajiCount += 1\r\n    anima()\r\n  }\r\n})\r\n\r\nfunction anima() {\r\n  if (huajiCount < COUNT) return\r\n  requestAnimationFrame(realAnima)\r\n}\r\n\r\nfunction realAnima() {\r\n  canvas.clear()\r\n  huajis.forEach(huaji => huaji.animation(canvas))\r\n\r\n  requestAnimationFrame(realAnima)\r\n}"]}