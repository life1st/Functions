{"version":3,"sources":["script\\canvas.js","script\\utils.js","script\\huaji.js","script\\main.js"],"names":["Canvas","el","canvas","height","width","ctx","getContext","prototype","setSize","clear","clearRect","drawRect","color","left","top","fillStyle","fillRect","drwaImg","img","drawImage","randomNum","min","max","range","Math","floor","random","getParams","params","window","location","search","arr","slice","split","obj","i","length","kv","Huaji","Image","src","huajiImg","position","size","step","zoom","speedH","speedW","setPosition","p","s","scale","animation","Object","assign","document","querySelector","body","clientWidth","clientHeight","huajiCount","COUNT","count","huajis","push","anima","realAnima","forEach","huaji","onload"],"mappings":"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","file":"main.699398df.map","sourceRoot":"..","sourcesContent":["export default function Canvas(el) {\n  this.canvas = el\n  this.height = 900\n  this.width = 1280\n  this.ctx = this.canvas.getContext('2d')\n}\n\nCanvas.prototype.setSize = function(width = 1280, height = 900) {\n  this.canvas.width = width\n  this.canvas.height = height\n  this.height = height\n  this.width = width\n}\n\nCanvas.prototype.clear = function() {\n  this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n}\n\nCanvas.prototype.drawRect = function(color, left, top, width, height) {\n  this.ctx.fillStyle = color\n  this.ctx.fillRect(top, left, width, height)\n}\n\nCanvas.prototype.drwaImg = function(img, left, top, width, height) {\n  this.ctx.drawImage(img, left, top, width, height)\n}\n\n","export function randomNum(min, max) {\n  let range = max - min + 1\n  return Math.floor(Math.random() * range + min)\n}\n\nexport function getParams() {\n  let params = window.location.search\n  params = params.slice(1)\n  let arr = params.split('&')\n  let obj = {}\n  for (let i = 0; i < arr.length; i++) {\n    let kv = arr[i].split('=')\n    obj[kv[0]] = kv[1]\n  }\n  return obj\n}\n","import huajiImg from '../imgs/huaji.png'\nimport { randomNum} from \"./utils\";\n\nexport default function Huaji() {\n  this.img = new Image()\n  this.img.src = huajiImg\n  this.position = {\n    top: 0,\n    left: 0\n  }\n  this.size = {\n    width: 50,\n    height: 50\n  }\n  this.step = 1\n  this.zoom = Math.random() > 0.6\n\n  // 设置初始速度 emmm...有改进空间\n  this.speedH = Math.random() > 0.6 ? 5 : -5\n  this.speedW = Math.random() > 0.6 ? -5 : 5\n}\n\nHuaji.prototype.setPosition = function(top, left) {\n  let p = this.position\n  p.top = top\n  p.left = left\n}\n\nHuaji.prototype.setSize = function(width, height) {\n  let s = this.size\n  s.width = width\n  s.height = height\n}\n\nHuaji.prototype.scale = function(min, max) {\n  if (this.size.width + this.step > max) {\n    this.step = -1\n  } else if (this.size.width + this.step < min) {\n    this.step = 1\n  }\n  this.setSize(this.size.width + this.step, this.size.height + this.step)\n}\n\nHuaji.prototype.animation = function(canvas) {\n  let p = Object.assign(this.position)\n  if (p.top < 0) {\n    this.speedH = 5 + randomNum(1, 4)\n  } else if (p.top + this.size.height > canvas.height) {\n    this.speedH = -5 + randomNum(-4, 1)\n  }\n  if (p.left < 0) {\n    this.speedW = 5 + randomNum(1, 4)\n  } else if (p.left + this.size.width > canvas.width) {\n    this.speedW = -5 + randomNum(-4, -1)\n  }\n  p.top += this.speedH\n  p.left += this.speedW\n  this.setPosition(p.top, p.left)\n  this.zoom\n    ? this.scale(50, 150)\n    : this.scale(40, 60)\n\n  canvas.drwaImg(this.img, this.position.left, this.position.top, this.size.width, this.size.height)\n\n}\n","import Canvas from './canvas'\nimport Huaji from './huaji'\n// import \"./utils\";\nimport { getParams, randomNum} from \"./utils\";\n\nlet el = document.querySelector('#huajiWrap')\nlet canvas = new Canvas(el)\ncanvas.setSize(document.body.clientWidth, document.body.clientHeight)\n\nlet params = getParams()\n\nlet huajiCount = 0\nconst COUNT = params.count || 300\n\nlet huajis = []\nfor (let i = 0; i < COUNT; i++) {\n  huajis.push(new Huaji())\n}\nhuajis.forEach(huaji => {\n  huaji.setPosition(randomNum(0, document.body.clientWidth)\n    , randomNum(0, document.body.clientHeight))\n  let size = randomNum(20, 300)\n  huaji.setSize(size, size)\n  huaji.img.onload = function() {\n    huajiCount += 1\n    anima()\n  }\n})\n\nfunction anima() {\n  if (huajiCount < COUNT) return\n  requestAnimationFrame(realAnima)\n}\n\nfunction realAnima() {\n  canvas.clear()\n  huajis.forEach(huaji => huaji.animation(canvas))\n\n  requestAnimationFrame(realAnima)\n}"]}